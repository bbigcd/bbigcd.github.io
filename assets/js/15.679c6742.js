(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{220:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("类和结构是 .NET Framework 通用类型系统的两种基本构造。 每种本质上都是一种数据结构，其中封装了同属一个逻辑单元的一组数据和行为。 数据和行为是类或结构的"),a("em",[t._v("成员")]),t._v("，包括方法、属性和事件等。")]),t._v(" "),a("p",[t._v("官方给出的结构体与类的区别: "),a("a",{attrs:{href:"https://docs.microsoft.com/zh-cn/dotnet/csharp/language-reference/builtin-types/struct#limitations-with-the-design-of-a-structure-type",target:"_blank",rel:"noopener noreferrer"}},[t._v("🔗"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"区别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#区别"}},[t._v("#")]),t._v(" 区别")]),t._v(" "),a("ul",[a("li",[t._v("语义上区分，类使用class关键字，结构体使用struct表示；")]),t._v(" "),a("li",[t._v("类是引用类型，结构体是值类型；")]),t._v(" "),a("li",[t._v("结构体不能包含显示的无参构造函数（默认生成隐式的无参构造函数），类可以；")]),t._v(" "),a("li",[t._v("结构体的显示有参构造函数，必须为字段和属性完全赋值（隐式无参构）；")]),t._v(" "),a("li",[t._v("结构类型不能从其他类或结构类型继承，也不能作为类的基础类型。 但是，结构类型可以实现接口；")]),t._v(" "),a("li",[t._v("类有析构函数，结构体无法创建析构函数；")])]),t._v(" "),a("h3",{attrs:{id:"分析过程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#分析过程"}},[t._v("#")]),t._v(" 分析过程")]),t._v(" "),a("p",[t._v("创建一个空的类与结构体")]),t._v(" "),a("div",{staticClass:"language-csharp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-csharp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 空类")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ClassType")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 空结构体")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" StructType "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("查看 IL")]),t._v(" "),a("div",{staticClass:"language-csharp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-csharp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 类")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" auto ansi beforefieldinit "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DiffofStructVsClass"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ClassType")]),t._v("\n       extends "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("mscorlib"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("System"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Object\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// end of class DiffofStructVsClass.ClassType")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("method "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" hidebysig specialname rtspecialname \n        instance "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ctor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" cil managed\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 代码大小       8 (0x8)")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("maxstack  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v("\n  IL_0000"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("  ldarg"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n  IL_0001"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("  call       instance "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("mscorlib"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("System"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("::")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ctor")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  IL_0006"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("  nop "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 无操作")]),t._v("\n  IL_0007"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("  ret\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// end of method ClassType::.ctor")]),t._v("\n")])])]),a("div",{staticClass:"language-csharp extra-class"},[a("pre",{pre:!0,attrs:{class:"language-csharp"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 结构体")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" sequential ansi "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("sealed")]),t._v(" beforefieldinit "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DiffofStructVsClass"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("StructType")]),t._v("\n       extends "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("mscorlib"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("System"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ValueType\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pack "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("size "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// end of class DiffofStructVsClass.StructType")]),t._v("\n")])])]),a("p",[t._v("类继承自 "),a("strong",[t._v("System.Object")]),t._v(" 类，而结构体继承 "),a("strong",[t._v("System.ValueType")]),t._v(" ，所以 类是引用类型，而结构体是值类型。")]),t._v(" "),a("p",[t._v("结构体创建显示的无参构造函数时，编译器会提示：")]),t._v(" "),a("blockquote",[a("p",[t._v("结构不能包含显示的无参数构造函数")])]),t._v(" "),a("p",[t._v("结构体创建显示的有参构造函数时，如果字段为赋值，编译器会提示:")]),t._v(" "),a("blockquote",[a("p",[t._v("在控制返回调用方之前，字段“*”必须完全赋值")])]),t._v(" "),a("h3",{attrs:{id:"reference"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#reference"}},[t._v("#")]),t._v(" Reference")]),t._v(" "),a("p",[t._v("https://docs.microsoft.com/zh-cn/dotnet/csharp/programming-guide/classes-and-structs/")])])}),[],!1,null,null,null);s.default=e.exports}}]);